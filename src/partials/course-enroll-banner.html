<!-- Neo-Brutalist Course Enrollment Grid -->
<section class="who-for" id="course-enroll-banner" style="background: #f0f0f0;">
  <h2>Enroll Now</h2>
  <div class="card-grid">
    {% for class in enroll_banner %}
    <div class="neo-card">

      <!-- Card Image -->
      {% if class.image %}
      <img src="{{ images_url }}/{{class.image}}" alt="{{class.title}}" style="width: 100%; height: 200px; object-fit: contain; border-bottom: 3px solid black; margin-bottom: 1rem;">
      {% endif %}

      <!-- Title & Code -->
      <h3 style="font-size: 1.5rem; margin-bottom: 0.5rem;">{{class.title}}</h3>
      <p style="font-weight: 800; color: #284B99; margin-bottom: 1rem;">{{class.course_code}}</p>

      <!-- Description -->
      <div style="flex-grow: 1; margin-bottom: 1.5rem;">
        <p>{{class.description}}</p>
        {% if class.prerequisite %}
        <p style="margin-top: 1rem; font-style: italic; font-weight: 700;">Prerequisite: {{class.prerequisite}}</p>
        {% endif %}
      </div>

      <!-- Course Pack Link (Optional) -->
      {% if class.course_pack_link %}
      <div style="text-align: center; margin-bottom: 1rem;">
          <a href="{{class.course_pack_link}}" target="_blank" style="text-decoration: underline; font-weight: 700; color: #284B99;">View Course Overview</a>
      </div>
      {% endif %}

      <!-- Price & CTA -->
      <div style="margin-top: auto; border-top: 2px solid #000; padding-top: 1rem; width: 100%;">
        {% if class.stripe_price_id %}
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
            <div>
              <span style="font-size: 1.5rem; font-weight: 900;">${{class.price}}</span>
              <span style="font-size: 1rem; font-weight: 400; margin-left: 4px;">+ no tax</span>
            </div>
          </div>
          <button class="btn-primary enroll-btn" data-stripe-price-id="{{class.stripe_price_id}}" style="display: block; width: 100%; text-align: center; text-decoration: none; border: none; font-family: inherit; font-size: 1rem; cursor: pointer;">Start Now</button>
        {% else %}
          <p style="text-align: center; font-size: 1.5rem; font-weight: 900; color: #FF9869;">Coming Soon</p>
        {% endif %}
      </div>

    </div>
    {% endfor %}
  </div>
</section>

<!-- Stripe Checkout Modal -->
<div id="payment-modal" data-stripe-key="{{ stripe_publishable_key }}" data-api-url="{{api_url}}">
  <div class="neo-modal-content">
    <span class="neo-close-btn">&times;</span>
    <h2>Secure Checkout</h2>
    <form id="payment-form">
      <div id="payment-element">
        <!--Stripe.js injects the Payment Element-->
      </div>
      <button id="payment-submit">
        <div class="spinner" id="payment-spinner"></div>
        <span id="button-text">Pay now</span>
      </button>
      <div id="payment-message"></div>
    </form>
  </div>
</div>
<!-- Load Stripe.js -->
<script src="https://js.stripe.com/v3/"></script>
